<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Configuration - Hermes (IBC Relayer CLI) Documentation</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Hermes (v0.7.0)</li><li class="spacer"></li><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="relayer.html"><strong aria-hidden="true">1.1.</strong> What is Hermes?</a></li></ol></li><li class="chapter-item expanded "><a href="features.html"><strong aria-hidden="true">2.</strong> Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="features/matrix.html"><strong aria-hidden="true">2.1.</strong> Feature matrix</a></li></ol></li><li class="chapter-item expanded "><a href="getting_started.html"><strong aria-hidden="true">3.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="pre_requisites.html"><strong aria-hidden="true">3.1.</strong> Pre-requisites</a></li><li class="chapter-item expanded "><a href="installation.html"><strong aria-hidden="true">3.2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="config.html" class="active"><strong aria-hidden="true">3.3.</strong> Configuration</a></li></ol></li><li class="chapter-item expanded "><a href="telemetry.html"><strong aria-hidden="true">4.</strong> Telemetry</a></li><li class="chapter-item expanded "><a href="rest-api.html"><strong aria-hidden="true">5.</strong> REST API</a></li><li class="chapter-item expanded "><a href="tutorials/index.html"><strong aria-hidden="true">6.</strong> Tutorials</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="tutorials/local-chains/index.html"><strong aria-hidden="true">6.1.</strong> Local chains</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="tutorials/local-chains/gaia.html"><strong aria-hidden="true">6.1.1.</strong> Install Gaia</a></li><li class="chapter-item expanded "><a href="tutorials/local-chains/start.html"><strong aria-hidden="true">6.1.2.</strong> Start the local chains</a></li><li class="chapter-item expanded "><a href="tutorials/local-chains/identifiers.html"><strong aria-hidden="true">6.1.3.</strong> Identifiers</a></li><li class="chapter-item expanded "><a href="tutorials/local-chains/relay-paths/index.html"><strong aria-hidden="true">6.1.4.</strong> Connect the chains using relay paths</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="tutorials/local-chains/relay-paths/create-new-path.html"><strong aria-hidden="true">6.1.4.1.</strong> Create a new path</a></li><li class="chapter-item expanded "><a href="tutorials/local-chains/relay-paths/multiple-paths.html"><strong aria-hidden="true">6.1.4.2.</strong> Relay packets on multiple paths</a></li></ol></li><li class="chapter-item expanded "><a href="tutorials/local-chains/raw/index.html"><strong aria-hidden="true">6.1.5.</strong> Connect the chains using raw transactions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="tutorials/local-chains/raw/client.html"><strong aria-hidden="true">6.1.5.1.</strong> Configure clients</a></li><li class="chapter-item expanded "><a href="tutorials/local-chains/raw/connection.html"><strong aria-hidden="true">6.1.5.2.</strong> Connection handshake</a></li><li class="chapter-item expanded "><a href="tutorials/local-chains/raw/channel.html"><strong aria-hidden="true">6.1.5.3.</strong> Channel handshake</a></li><li class="chapter-item expanded "><a href="tutorials/local-chains/raw/packet.html"><strong aria-hidden="true">6.1.5.4.</strong> Relay packets</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="commands/index.html"><strong aria-hidden="true">7.</strong> Commands Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/global.html"><strong aria-hidden="true">7.1.</strong> Global options and JSON output</a></li><li class="chapter-item expanded "><a href="commands/keys/index.html"><strong aria-hidden="true">7.2.</strong> Keys</a></li><li class="chapter-item expanded "><a href="commands/config.html"><strong aria-hidden="true">7.3.</strong> Config</a></li><li class="chapter-item expanded "><a href="commands/path-setup/index.html"><strong aria-hidden="true">7.4.</strong> Path setup</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/path-setup/clients.html"><strong aria-hidden="true">7.4.1.</strong> Clients</a></li><li class="chapter-item expanded "><a href="commands/path-setup/connections.html"><strong aria-hidden="true">7.4.2.</strong> Connections</a></li><li class="chapter-item expanded "><a href="commands/path-setup/channels.html"><strong aria-hidden="true">7.4.3.</strong> Channels</a></li></ol></li><li class="chapter-item expanded "><a href="commands/relaying/index.html"><strong aria-hidden="true">7.5.</strong> Relaying</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/relaying/packets.html"><strong aria-hidden="true">7.5.1.</strong> Packet Messages</a></li><li class="chapter-item expanded "><a href="commands/relaying/handshakes.html"><strong aria-hidden="true">7.5.2.</strong> Handshake Messages</a></li></ol></li><li class="chapter-item expanded "><a href="commands/listen/index.html"><strong aria-hidden="true">7.6.</strong> Listen mode</a></li><li class="chapter-item expanded "><a href="commands/upgrade/index.html"><strong aria-hidden="true">7.7.</strong> Client upgrade</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/upgrade/test.html"><strong aria-hidden="true">7.7.1.</strong> Testing client upgrade</a></li></ol></li><li class="chapter-item expanded "><a href="commands/misbehaviour/index.html"><strong aria-hidden="true">7.8.</strong> Misbehaviour</a></li><li class="chapter-item expanded "><a href="commands/queries/index.html"><strong aria-hidden="true">7.9.</strong> Queries</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/queries/client.html"><strong aria-hidden="true">7.9.1.</strong> Client</a></li><li class="chapter-item expanded "><a href="commands/queries/connection.html"><strong aria-hidden="true">7.9.2.</strong> Connection</a></li><li class="chapter-item expanded "><a href="commands/queries/channel.html"><strong aria-hidden="true">7.9.3.</strong> Channel</a></li><li class="chapter-item expanded "><a href="commands/queries/packet.html"><strong aria-hidden="true">7.9.4.</strong> Packet</a></li><li class="chapter-item expanded "><a href="commands/queries/tx.html"><strong aria-hidden="true">7.9.5.</strong> Tx</a></li></ol></li><li class="chapter-item expanded "><a href="commands/raw/index.html"><strong aria-hidden="true">7.10.</strong> Raw transactions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/raw/client.html"><strong aria-hidden="true">7.10.1.</strong> Client</a></li><li class="chapter-item expanded "><a href="commands/raw/connection.html"><strong aria-hidden="true">7.10.2.</strong> Connection</a></li><li class="chapter-item expanded "><a href="commands/raw/channel-open.html"><strong aria-hidden="true">7.10.3.</strong> Channel Open</a></li><li class="chapter-item expanded "><a href="commands/raw/channel-close.html"><strong aria-hidden="true">7.10.4.</strong> Channel Close</a></li><li class="chapter-item expanded "><a href="commands/raw/packet.html"><strong aria-hidden="true">7.10.5.</strong> Packet</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="help.html"><strong aria-hidden="true">8.</strong> Help</a></li><li class="chapter-item expanded "><a href="glossary.html"><strong aria-hidden="true">9.</strong> Glossary</a></li><li class="spacer"></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Hermes (IBC Relayer CLI) Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="configuration"><a class="header" href="#configuration">Configuration</a></h1>
<p>In order to run Hermes, you will need to have a configuration file.</p>
<p>The format supported for the configuration file is <a href="https://toml.io/en/">TOML</a>.</p>
<p>By default, Hermes expects the configuration file to be located at <code>$HOME/.hermes/config.toml</code>.</p>
<p>This can be overridden by supplying the <code>-c</code> flag when invoking <code>hermes</code>, before the
name of the command to run, eg. <code>hermes -c my_config.toml query connection channels ibc-1 connection-1</code>.</p>
<blockquote>
<p>The current version of Hermes does not support managing the configuration file programmatically.
You will need to use a text editor to create the file and add content to it.</p>
</blockquote>
<pre><code class="language-bash">hermes [-c CONFIG_FILE] COMMAND
</code></pre>
<h2 id="table-of-contents"><a class="header" href="#table-of-contents">Table of contents</a></h2>
<ul>
<li><a href="#configuration-format">Configuration format</a>
<ul>
<li><a href="#global"><code>[global]</code></a>
<ul>
<li><a href="#parameters">Parameters</a></li>
</ul>
</li>
<li><a href="#telemetry"><code>[telemetry]</code></a>
<ul>
<li><a href="#parameters-1">Parameters</a></li>
</ul>
</li>
<li><a href="#rest"><code>[rest]</code></a>
<ul>
<li><a href="#parameters-2">Parameters</a></li>
</ul>
</li>
<li><a href="#chains"><code>[[chains]]</code></a>
<ul>
<li><a href="#parameters-3">Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#adding-private-keys">Adding private keys</a></li>
<li><a href="#example-configuration-file">Example configuration file</a></li>
<li><a href="#update-the-configuration-without-restarting-hermes">Update the configuration without restarting Hermes</a></li>
<li><a href="#next-steps">Next steps</a></li>
</ul>
<h2 id="configuration-format"><a class="header" href="#configuration-format">Configuration format</a></h2>
<p>The configuration file must have one <code>global</code> section, and one <code>chains</code> section for each chain.</p>
<blockquote>
<p><strong>Note:</strong> As of 0.6.0, the Hermes configuration file is self-documented.
This section of the guide which discusses each parameter in turn is no
longer maintained, and we may remove it soon. Please read the configuration
file <a href="https://github.com/informalsystems/ibc-rs/blob/v0.7.0/config.toml"><code>config.toml</code></a> itself for the most up-to-date documentation of parameters.</p>
</blockquote>
<h3 id="global"><a class="header" href="#global"><code>[global]</code></a></h3>
<p>The <code>global</code> section has parameters that apply globally to the relayer operation.</p>
<h4 id="parameters"><a class="header" href="#parameters">Parameters</a></h4>
<ul>
<li>
<p><strong>strategy</strong>: <em>(string)</em> Specify the strategy to be used by the relayer. Default: <code>packets</code>
Two options are currently supported:</p>
<ul>
<li><code>all</code>: Relay packets and perform channel and connection handshakes.</li>
<li><code>packets</code>: Relay packets only.</li>
</ul>
</li>
<li>
<p><strong>log_level</strong>: <em>(string)</em> Specify the verbosity for the relayer logging output. Valid options are 'error', 'warn', 'info', 'debug', 'trace'. Default: <code>info</code>.
For more information on parametrizing the log output, see the section <a href="./help.html#parametrizing-the-log-output-level">help/log-level</a>.</p>
</li>
</ul>
<p>Here is an example for the <code>global</code> section:</p>
<pre><code class="language-toml">[global]
strategy = 'packets'
log_level = 'info'
</code></pre>
<h3 id="telemetry"><a class="header" href="#telemetry"><code>[telemetry]</code></a></h3>
<p>The <code>telemetry</code> section defines parameters for Hermes' built-in <a href="telemetry.html">telemetry</a> capabilities.</p>
<h4 id="parameters-1"><a class="header" href="#parameters-1">Parameters</a></h4>
<ul>
<li>
<p><strong>enabled</strong>: <em>(boolean)</em> Whether or not to enable the telemetry service. Default: <code>false</code>.</p>
</li>
<li>
<p><strong>host</strong>: <em>(string)</em> Specify the IPv4/6 host over which the built-in HTTP server will serve the metrics gathered by the telemetry service. Default: <code>127.0.0.1</code></p>
</li>
<li>
<p><strong>port</strong>: <em>(u16)</em> Specify the port over which the built-in HTTP server will serve the metrics gathered by the telemetry service. Default: <code>3001</code></p>
</li>
</ul>
<p>Here is an example for the <code>telemetry</code> section:</p>
<pre><code class="language-toml">[telemetry]
enabled = true
host    = '127.0.0.1'
port    = 3001
</code></pre>
<h3 id="rest"><a class="header" href="#rest"><code>[rest]</code></a></h3>
<p>The <code>rest</code> section defines parameters for Hermes' built-in <a href="rest-api.html">REST API</a>..</p>
<h4 id="parameters-2"><a class="header" href="#parameters-2">Parameters</a></h4>
<ul>
<li>
<p><strong>enabled</strong>: <em>(boolean)</em> Whether or not to enable the built-in REST server. Default: <code>false</code>.</p>
</li>
<li>
<p><strong>host</strong>: <em>(string)</em> Specify the IPv4/6 host over which the built-in HTTP server will be listening. Default: <code>127.0.0.1</code></p>
</li>
<li>
<p><strong>port</strong>: <em>(u16)</em> Specify the port over which the built-in HTTP server will be listening. Default: <code>3000</code></p>
</li>
</ul>
<p>Here is an example for the <code>rest</code> section:</p>
<pre><code class="language-toml">[rest]
enabled = true
host    = '127.0.0.1'
port    = 3000
</code></pre>
<h3 id="chains"><a class="header" href="#chains"><code>[[chains]]</code></a></h3>
<p>A <code>chains</code> section includes parameters related to a chain and the full node to which the relayer can send transactions and queries.</p>
<h4 id="parameters-3"><a class="header" href="#parameters-3">Parameters</a></h4>
<ul>
<li>
<p><strong>id</strong>: <em>(string)</em> Specify the chain ID. For example <code>ibc-0</code></p>
</li>
<li>
<p><strong>rpc_addr</strong>: <em>(string)</em> Specify the RPC address and port where the chain RPC server listens on. For example <code>http://localhost:26657</code></p>
</li>
<li>
<p><strong>grpc_addr</strong>: <em>(string)</em> Specify the GRPC address and port where the chain GRPC server listens on. For example <code>http://localhost:9090</code></p>
</li>
<li>
<p><strong>websocket_addr</strong>: <em>(string)</em> Specify the WebSocket address and port where the chain WebSocket server listens on. For example <code>ws://localhost:26657/websocket</code></p>
</li>
<li>
<p><strong>rpc_timeout</strong>: <em>(string)</em> Specify the maximum amount of time (duration) that the RPC requests should take before timing out. Default: <code>10s</code> (10 seconds).</p>
</li>
<li>
<p><strong>account_prefix</strong>: <em>(string)</em> Specify the prefix used by the chain. For example <code>cosmos</code></p>
</li>
<li>
<p><strong>key_name</strong>: <em>(string)</em> Specify the name of the private key to use for signing transactions. See the <a href="commands/keys/index.html#adding-keys">Adding Keys</a> chapter for for more information about managing signing keys.</p>
</li>
<li>
<p><strong>store_prefix</strong>: <em>(string)</em> Specify the store prefix used by the on-chain IBC modules. For example <code>ibc</code>.</p>
</li>
<li>
<p><strong>max_gas</strong>: <em>(u64)</em> Specify the maximum amount of gas to be used as the gas limit for a transaction. Default: <code>300000</code></p>
</li>
<li>
<p><strong>gas_price</strong>: <em>(table)</em></p>
<ul>
<li><strong>price</strong>: <em>(f64)</em> Specify the price per gas used of the fee to submit a transaction.</li>
<li><strong>denom</strong>: <em>(string)</em> Specify the denomination of the fee.</li>
</ul>
</li>
<li>
<p><strong>gas_adjustment</strong>: <em>(f64)</em> Specify by what percentage to increase the gas estimate used to compute the fee, to account for potential estimation error. Default: <code>0.1</code>, ie. 10%.</p>
</li>
<li>
<p><strong>max_msg_num</strong>: <em>(u64)</em> Specify how many IBC messages at most to include in a single transaction. Default: <code>30</code></p>
</li>
<li>
<p><strong>max_tx_size</strong>: <em>(u64)</em> Specify the maximum size, in bytes, of each transaction that Hermes will submit. Default: <code>2097152</code> (2 MiB)</p>
</li>
<li>
<p><strong>clock_drift</strong>: <em>(string)</em>  Specify the maximum amount of time to tolerate a clock drift. The clock drift parameter defines how much new (untrusted) header's Time can drift into the future. Default: <code>5s</code></p>
</li>
<li>
<p><strong>trusting_period</strong>: <em>(string)</em> Specify the amount of time to be used as the light client trusting period. It should be significantly less than the unbonding period (e.g. unbonding period = 3 weeks, trusting period = 2 weeks). Default: <code>14days</code> (336 hours)</p>
</li>
<li>
<p><strong>trust_threshold</strong> <sup>(advanced)</sup>: <em>(table)</em> Specify the trust threshold for the light client, ie. the maximum fraction of validators which have changed between two blocks. Default: <code>{ numerator = '1', denominator = '3' }</code>, ie. 1/3.</p>
<ul>
<li><strong>numerator</strong>: <em>(string)</em> The numerator of the fraction (must parse to a <code>u64</code>).</li>
<li><strong>denominator</strong>: <em>(string)</em> The denominator of the fraction (must parse to a <code>u64</code>).
<strong>Warning</strong> - <em>This is an advanced feature! Modify with caution.</em></li>
</ul>
</li>
</ul>
<p>For example if you want to add a configuration for a chain named <code>ibc-0</code>:</p>
<pre><code class="language-toml">[[chains]]
id = 'ibc-0'
rpc_addr = 'http://127.0.0.1:26657'
grpc_addr = 'http://127.0.0.1:9090'
websocket_addr = 'ws://localhost:26657/websocket'
rpc_timeout = '10s'
account_prefix = 'cosmos'
key_name = 'testkey'
store_prefix = 'ibc'
max_gas = 2000000
gas_price = { price = 0.001, denom = 'stake' }
gas_adjustment = 0.1
clock_drift = '5s'
trusting_period = '14days'
</code></pre>
<h2 id="adding-private-keys"><a class="header" href="#adding-private-keys">Adding private keys</a></h2>
<p>For each chain configured you need to add a private key for that chain in order to submit <a href="./commands/raw/index.html">transactions</a>, please refer to the <a href="./commands/keys/index.html">Keys</a> sections in order to learn how to add the private keys that are used by the relayer.</p>
<h2 id="example-configuration-file"><a class="header" href="#example-configuration-file">Example configuration file</a></h2>
<p>Here is a full example of a configuration file with two chains configured:</p>
<pre><code class="language-toml">[global]
strategy = 'packets'
log_level = 'info'

[[chains]]
id = 'ibc-0'
rpc_addr = 'http://127.0.0.1:26657'
grpc_addr = 'http://127.0.0.1:9090'
websocket_addr = 'ws://localhost:26657/websocket'
rpc_timeout = '10s'
account_prefix = 'cosmos'
key_name = 'testkey'
store_prefix = 'ibc'
max_gas = 2000000
gas_price = { price = 0.001, denom = 'stake' }
gas_adjustment = 0.1
clock_drift = '5s'
trusting_period = '14days'
trust_threshold = { numerator = '1', denominator = '3' }

[[chains]]
id = 'ibc-1'
rpc_addr = 'http://127.0.0.1:26557'
grpc_addr = 'http://127.0.0.1:9091'
websocket_addr = 'ws://localhost:26557/websocket'
rpc_timeout = '10s'
account_prefix = 'cosmos'
key_name = 'testkey'
store_prefix = 'ibc'
max_gas = 2000000
gas_price = { price = 0.001, denom = 'stake' }
gas_adjustment = 0.1
clock_drift = '5s'
trusting_period = '14days'
trust_threshold = { numerator = '1', denominator = '3' }
</code></pre>
<h2 id="update-the-configuration-without-restarting-hermes"><a class="header" href="#update-the-configuration-without-restarting-hermes">Update the configuration without restarting Hermes</a></h2>
<p>Before Hermes 0.6.1, the only way to get Hermes to pick up a change in the
configuration was to stop and restart Hermes.</p>
<p>As of version 0.6.1, Hermes will react to receiving a <code>SIGHUP</code> signal
by reloading the <code>[chains]</code> section of the configuration, and
stopping, starting or restarting the affected workers.</p>
<blockquote>
<p>⚠️  <strong>Warning:</strong> the configuration reload feature only supports
adding, removing, or updating configuration of chains. It does
not support dynamically changing global features, such as the
filtering mechanism or logging level.</p>
</blockquote>
<p>For example, say you start with the configuration given in the previous section
in <code>~/.hermes/config.toml</code>, ie. with two chains <code>ibc-0</code> and <code>ibc-1</code>.</p>
<ol>
<li>
<p>Start three chains <code>ibc-0</code>, <code>ibc-1</code> and <code>ibc-2</code>:</p>
<pre><code class="language-shell">./scripts/dev-env ibc-0 ibc-1 ibc-2
</code></pre>
</li>
<li>
<p>Start Hermes</p>
<pre><code class="language-shell">hermes start
</code></pre>
</li>
<li>
<p>Add the configuration for the chain <code>ibc-2</code> to the configuration file:</p>
<pre><code class="language-toml">[[chains]]
id = 'ibc-2'
rpc_addr = 'http://127.0.0.1:26457'
grpc_addr = 'http://127.0.0.1:9092'
websocket_addr = 'ws://127.0.0.1:26457/websocket'
rpc_timeout = '10s'
account_prefix = 'cosmos'
key_name = 'testkey'
store_prefix = 'ibc'
max_gas = 20000000
gas_price = { price = 0.001, denom = 'stake' }
clock_drift = '5s'
trusting_period = '14days'
</code></pre>
</li>
<li>
<p>Change the configuration of the chain <code>ibc-0</code>, eg. the <code>max_gas</code> property.</p>
</li>
<li>
<p>Send a <code>SIGHUP</code> signal to the <code>hermes</code> process:</p>
<blockquote>
<p>⚠️  <strong>Warning:</strong> the command below will send a <code>SIGHUP</code> signal to the first
process in the list emitted by <code>ps aux</code> which contains the string <code>hermes</code>.
Alternatively, you can look up the process ID (PID) of the <code>hermes</code> process
you want to target and use <code>kill -SIGHUP PID</code>.</p>
</blockquote>
<pre><code class="language-shell">ps aux | rg hermes | awk '{ print $2 }' | head -n1 | xargs -I{} kill -SIGHUP {}
</code></pre>
</li>
<li>
<p>Watch the output of Hermes, it will show that Hermes has picked up the changes in
the config. Hermes is now relaying between the three chains and using the new
maximum amount of gas specified for <code>ibc-0</code>.</p>
<pre><code>...

INFO reloading configuration (triggered by SIGHUP)
INFO configuration successfully reloaded
INFO updating existing chain chain.id=ibc-1
INFO adding new chain chain.id=ibc-2
</code></pre>
</li>
</ol>
<p>To make sure Hermes ends up in the expected state, check out the documentation
on <a href="help.html#inspecting-the-relayer-state">inspecting the relayer state</a>.</p>
<h2 id="next-steps"><a class="header" href="#next-steps">Next steps</a></h2>
<p>Now that you learned how to build the relayer and how to create a configuration file, you can go to the <a href="./tutorials/local-chains/index.html"><code>Two Chains</code></a> tutorial to learn how to perform some local testing connecting the relayer to two local chains.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="installation.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="telemetry.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="installation.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="telemetry.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="mermaid.min.js"></script>
        <script type="text/javascript" src="mermaid-init.js"></script>
    </body>
</html>
